{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Shaki/Downloads/Portfolio/portfolio/app/api/projects/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\r\nimport fs from 'fs';\r\nimport path from 'path';\r\n\r\nconst dataFilePath = path.join(process.cwd(), 'lib', 'data', 'projects.json');\r\n\r\n// Helper function to read data\r\nfunction readData() {\r\n    const fileContents = fs.readFileSync(dataFilePath, 'utf8');\r\n    return JSON.parse(fileContents);\r\n}\r\n\r\n// Helper function to write data\r\nfunction writeData(data: any) {\r\n    fs.writeFileSync(dataFilePath, JSON.stringify(data, null, 2));\r\n}\r\n\r\n// GET - Fetch all projects\r\nexport async function GET(request: NextRequest) {\r\n    try {\r\n        const { searchParams } = new URL(request.url);\r\n        const mode = searchParams.get('mode'); // 'developer' or 'designer'\r\n\r\n        const data = readData();\r\n\r\n        if (mode && (mode === 'developer' || mode === 'designer')) {\r\n            return NextResponse.json(data[mode]);\r\n        }\r\n\r\n        return NextResponse.json(data);\r\n    } catch (error) {\r\n        return NextResponse.json(\r\n            { error: 'Failed to fetch projects' },\r\n            { status: 500 }\r\n        );\r\n    }\r\n}\r\n\r\n// POST - Create a new project\r\nexport async function POST(request: NextRequest) {\r\n    try {\r\n        const body = await request.json();\r\n        const { mode, project } = body;\r\n\r\n        if (!mode || !project) {\r\n            return NextResponse.json(\r\n                { error: 'Mode and project data are required' },\r\n                { status: 400 }\r\n            );\r\n        }\r\n\r\n        const data = readData();\r\n\r\n        // Generate new ID\r\n        const newId = mode === 'developer'\r\n            ? `d${data.developer.length + 1}`\r\n            : `${data.designer.length + 1}`;\r\n\r\n        const newProject = {\r\n            ...project,\r\n            id: newId,\r\n        };\r\n\r\n        data[mode].push(newProject);\r\n        writeData(data);\r\n\r\n        return NextResponse.json(newProject, { status: 201 });\r\n    } catch (error) {\r\n        return NextResponse.json(\r\n            { error: 'Failed to create project' },\r\n            { status: 500 }\r\n        );\r\n    }\r\n}\r\n\r\n// PUT - Update a project\r\nexport async function PUT(request: NextRequest) {\r\n    try {\r\n        const body = await request.json();\r\n        const { mode, id, project } = body;\r\n\r\n        if (!mode || !id || !project) {\r\n            return NextResponse.json(\r\n                { error: 'Mode, ID, and project data are required' },\r\n                { status: 400 }\r\n            );\r\n        }\r\n\r\n        const data = readData();\r\n        const index = data[mode].findIndex((p: any) => p.id === id);\r\n\r\n        if (index === -1) {\r\n            return NextResponse.json(\r\n                { error: 'Project not found' },\r\n                { status: 404 }\r\n            );\r\n        }\r\n\r\n        data[mode][index] = { ...data[mode][index], ...project };\r\n        writeData(data);\r\n\r\n        return NextResponse.json(data[mode][index]);\r\n    } catch (error) {\r\n        return NextResponse.json(\r\n            { error: 'Failed to update project' },\r\n            { status: 500 }\r\n        );\r\n    }\r\n}\r\n\r\n// DELETE - Delete a project\r\nexport async function DELETE(request: NextRequest) {\r\n    try {\r\n        const { searchParams } = new URL(request.url);\r\n        const mode = searchParams.get('mode');\r\n        const id = searchParams.get('id');\r\n\r\n        if (!mode || !id) {\r\n            return NextResponse.json(\r\n                { error: 'Mode and ID are required' },\r\n                { status: 400 }\r\n            );\r\n        }\r\n\r\n        const data = readData();\r\n        const index = data[mode].findIndex((p: any) => p.id === id);\r\n\r\n        if (index === -1) {\r\n            return NextResponse.json(\r\n                { error: 'Project not found' },\r\n                { status: 404 }\r\n            );\r\n        }\r\n\r\n        data[mode].splice(index, 1);\r\n        writeData(data);\r\n\r\n        return NextResponse.json({ message: 'Project deleted successfully' });\r\n    } catch (error) {\r\n        return NextResponse.json(\r\n            { error: 'Failed to delete project' },\r\n            { status: 500 }\r\n        );\r\n    }\r\n}\r\n"],"names":[],"mappings":"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"}}]
}