{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Shaki/Downloads/Portfolio/portfolio/app/api/testimonials/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\r\nimport fs from 'fs';\r\nimport path from 'path';\r\n\r\nconst dataFilePath = path.join(process.cwd(), 'lib', 'data', 'testimonials.json');\r\n\r\n// Helper function to read data\r\nfunction readData() {\r\n    const fileContents = fs.readFileSync(dataFilePath, 'utf8');\r\n    return JSON.parse(fileContents);\r\n}\r\n\r\n// Helper function to write data\r\nfunction writeData(data: any) {\r\n    fs.writeFileSync(dataFilePath, JSON.stringify(data, null, 2));\r\n}\r\n\r\n// GET - Fetch all testimonials\r\nexport async function GET() {\r\n    try {\r\n        const data = readData();\r\n        return NextResponse.json(data);\r\n    } catch (error) {\r\n        return NextResponse.json(\r\n            { error: 'Failed to fetch testimonials' },\r\n            { status: 500 }\r\n        );\r\n    }\r\n}\r\n\r\n// POST - Create a new testimonial\r\nexport async function POST(request: NextRequest) {\r\n    try {\r\n        const testimonial = await request.json();\r\n\r\n        const data = readData();\r\n\r\n        // Generate new ID\r\n        const newId = `${data.length + 1}`;\r\n        const newTestimonial = {\r\n            ...testimonial,\r\n            id: newId,\r\n        };\r\n\r\n        data.push(newTestimonial);\r\n        writeData(data);\r\n\r\n        return NextResponse.json(newTestimonial, { status: 201 });\r\n    } catch (error) {\r\n        return NextResponse.json(\r\n            { error: 'Failed to create testimonial' },\r\n            { status: 500 }\r\n        );\r\n    }\r\n}\r\n\r\n// PUT - Update a testimonial\r\nexport async function PUT(request: NextRequest) {\r\n    try {\r\n        const body = await request.json();\r\n        const { id, testimonial } = body;\r\n\r\n        if (!id || !testimonial) {\r\n            return NextResponse.json(\r\n                { error: 'ID and testimonial data are required' },\r\n                { status: 400 }\r\n            );\r\n        }\r\n\r\n        const data = readData();\r\n        const index = data.findIndex((t: any) => t.id === id);\r\n\r\n        if (index === -1) {\r\n            return NextResponse.json(\r\n                { error: 'Testimonial not found' },\r\n                { status: 404 }\r\n            );\r\n        }\r\n\r\n        data[index] = { ...data[index], ...testimonial };\r\n        writeData(data);\r\n\r\n        return NextResponse.json(data[index]);\r\n    } catch (error) {\r\n        return NextResponse.json(\r\n            { error: 'Failed to update testimonial' },\r\n            { status: 500 }\r\n        );\r\n    }\r\n}\r\n\r\n// DELETE - Delete a testimonial\r\nexport async function DELETE(request: NextRequest) {\r\n    try {\r\n        const { searchParams } = new URL(request.url);\r\n        const id = searchParams.get('id');\r\n\r\n        if (!id) {\r\n            return NextResponse.json(\r\n                { error: 'ID is required' },\r\n                { status: 400 }\r\n            );\r\n        }\r\n\r\n        const data = readData();\r\n        const index = data.findIndex((t: any) => t.id === id);\r\n\r\n        if (index === -1) {\r\n            return NextResponse.json(\r\n                { error: 'Testimonial not found' },\r\n                { status: 404 }\r\n            );\r\n        }\r\n\r\n        data.splice(index, 1);\r\n        writeData(data);\r\n\r\n        return NextResponse.json({ message: 'Testimonial deleted successfully' });\r\n    } catch (error) {\r\n        return NextResponse.json(\r\n            { error: 'Failed to delete testimonial' },\r\n            { status: 500 }\r\n        );\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;AAAA;AACA;AACA;;;;AAEA,MAAM,eAAe,4GAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,OAAO,QAAQ;AAE7D,+BAA+B;AAC/B,SAAS;IACL,MAAM,eAAe,wGAAE,CAAC,YAAY,CAAC,cAAc;IACnD,OAAO,KAAK,KAAK,CAAC;AACtB;AAEA,gCAAgC;AAChC,SAAS,UAAU,IAAS;IACxB,wGAAE,CAAC,aAAa,CAAC,cAAc,KAAK,SAAS,CAAC,MAAM,MAAM;AAC9D;AAGO,eAAe;IAClB,IAAI;QACA,MAAM,OAAO;QACb,OAAO,gJAAY,CAAC,IAAI,CAAC;IAC7B,EAAE,OAAO,OAAO;QACZ,OAAO,gJAAY,CAAC,IAAI,CACpB;YAAE,OAAO;QAA+B,GACxC;YAAE,QAAQ;QAAI;IAEtB;AACJ;AAGO,eAAe,KAAK,OAAoB;IAC3C,IAAI;QACA,MAAM,cAAc,MAAM,QAAQ,IAAI;QAEtC,MAAM,OAAO;QAEb,kBAAkB;QAClB,MAAM,QAAQ,GAAG,KAAK,MAAM,GAAG,GAAG;QAClC,MAAM,iBAAiB;YACnB,GAAG,WAAW;YACd,IAAI;QACR;QAEA,KAAK,IAAI,CAAC;QACV,UAAU;QAEV,OAAO,gJAAY,CAAC,IAAI,CAAC,gBAAgB;YAAE,QAAQ;QAAI;IAC3D,EAAE,OAAO,OAAO;QACZ,OAAO,gJAAY,CAAC,IAAI,CACpB;YAAE,OAAO;QAA+B,GACxC;YAAE,QAAQ;QAAI;IAEtB;AACJ;AAGO,eAAe,IAAI,OAAoB;IAC1C,IAAI;QACA,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,EAAE,EAAE,EAAE,WAAW,EAAE,GAAG;QAE5B,IAAI,CAAC,MAAM,CAAC,aAAa;YACrB,OAAO,gJAAY,CAAC,IAAI,CACpB;gBAAE,OAAO;YAAuC,GAChD;gBAAE,QAAQ;YAAI;QAEtB;QAEA,MAAM,OAAO;QACb,MAAM,QAAQ,KAAK,SAAS,CAAC,CAAC,IAAW,EAAE,EAAE,KAAK;QAElD,IAAI,UAAU,CAAC,GAAG;YACd,OAAO,gJAAY,CAAC,IAAI,CACpB;gBAAE,OAAO;YAAwB,GACjC;gBAAE,QAAQ;YAAI;QAEtB;QAEA,IAAI,CAAC,MAAM,GAAG;YAAE,GAAG,IAAI,CAAC,MAAM;YAAE,GAAG,WAAW;QAAC;QAC/C,UAAU;QAEV,OAAO,gJAAY,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM;IACxC,EAAE,OAAO,OAAO;QACZ,OAAO,gJAAY,CAAC,IAAI,CACpB;YAAE,OAAO;QAA+B,GACxC;YAAE,QAAQ;QAAI;IAEtB;AACJ;AAGO,eAAe,OAAO,OAAoB;IAC7C,IAAI;QACA,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,IAAI,QAAQ,GAAG;QAC5C,MAAM,KAAK,aAAa,GAAG,CAAC;QAE5B,IAAI,CAAC,IAAI;YACL,OAAO,gJAAY,CAAC,IAAI,CACpB;gBAAE,OAAO;YAAiB,GAC1B;gBAAE,QAAQ;YAAI;QAEtB;QAEA,MAAM,OAAO;QACb,MAAM,QAAQ,KAAK,SAAS,CAAC,CAAC,IAAW,EAAE,EAAE,KAAK;QAElD,IAAI,UAAU,CAAC,GAAG;YACd,OAAO,gJAAY,CAAC,IAAI,CACpB;gBAAE,OAAO;YAAwB,GACjC;gBAAE,QAAQ;YAAI;QAEtB;QAEA,KAAK,MAAM,CAAC,OAAO;QACnB,UAAU;QAEV,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAAmC;IAC3E,EAAE,OAAO,OAAO;QACZ,OAAO,gJAAY,CAAC,IAAI,CACpB;YAAE,OAAO;QAA+B,GACxC;YAAE,QAAQ;QAAI;IAEtB;AACJ"}}]
}